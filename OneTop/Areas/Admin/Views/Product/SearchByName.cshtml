@{
    Layout = "/Views/Shared/_AdminLayout.cshtml";

}
@model List<OneTop.Models.Product>

@section Styles {
    <link rel="stylesheet" href="~/admin/css/asset/css_part/Product/ProductManager.css" asp-append-version="true" />
}
<main class="admin-product-manager">
    <div class="pm-header">
        <h1>Product Manager</h1>
        <form method="post" asp-action="SearchByName" asp-controller="Product">
            <div class="pm-controls">
                <div class="pm-search">
                    <input type="search" name="txtKeywords" placeholder="Search products..." aria-label="Search products" />
                </div>
        </form>
        <div class="pm-actions">
            <a class="btn btn-primary" asp-controller="Product" asp-action="CreateProduct">+ Add Product</a>
        </div>
    </div>
    </div>

    <section class="pm-list">
        <div class="pm-table-wrapper">
            <table class="pm-table" aria-describedby="product-list">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th class="col-image">Image</th>
                        <th class="col-name">Name</th>
                        <th class="col-category">Category</th>
                        <th class="col-price">Price</th>
                        <th class="col-stock">Stock</th>
                        <th class="col-discount">Discount</th>
                        <th class="col-actions">Actions</th>
                    </tr>
                </thead>
                <tbody id="product-list">
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>@item.ProductId</td>
                            <td class="col-image">
                                <img src="@(string.IsNullOrEmpty(item.ImageUrl)
                                                                              ? Url.Content("~/img/no-image.png")
                                                                              : item.ImageUrl.StartsWith("http")
                                                                                  ? item.ImageUrl
                                                                                  : Url.Content("~/img/" + item.ImageUrl))"
                                 alt="@item.ProductName"
                                 style="width:80px"
                                 onerror="this.src='/img/no-image.png'" />
                        </td>
                            <td class="col-name">@item.ProductName</td>
                            <td class="col-category">@item.CategoryName</td>
                            <td class="col-price">@item.Price</td>
                            <td class="col-stock">@item.Stock</td>
                            <td class="col-discount">@item.DiscountPercent</td>
                            <td class="col-actions">
                                <a class="btn btn-sm" asp-area="admin" asp-action="EditProduct" asp-controller="Product" asp-route-id="1">Edit</a>
                                <a class="btn btn-sm btn-primary" asp-area="admin" asp-action="DeleteProduct" asp-controller="Product" asp-route-id="@item.ProductId">Delete</a>
                            </td>
                        </tr>
                    }


                </tbody>
            </table>
        </div>

        <div class="pm-pagination" role="navigation" aria-label="Pagination">
            <button class="btn btn-sm" disabled>« Prev</button>
            <span class="page-info">1 / 10</span>
            <button class="btn btn-sm">Next »</button>
        </div>
    </section>
</main>